<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="{{ url_for('static', filename='js/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/accessibility.js') }}"></script>
    <script src="{{ url_for('static', filename='js/exporting.js') }}"></script>
    <script src="{{ url_for('static', filename='js/highcharts.js') }}"></script>
    <link
      rel="stylesheet" type="text/css"
      href="{{ url_for('static', filename='css/styledashboard.css')}}"
    />
    <title>MET</title>
    <link rel="icon" href="{{ url_for('static', filename='images/automation1.png') }}" type="image/png">
  </head>
  <body>
    <div id="loading" class="loading-overlay" >
      <img src="{{ url_for('static', filename='images/loading.gif') }}" alt="Loading..."/>
    </div>
    <div class="wrapper">
      <div id="coppyright"><a href="{{ url_for('index1') }}">¬©2025 Copyright MET-Automation | IOT</a></div>
      <nav id="navbar">
        <ul class="navbar-items flexbox-col">
          <li class="navbar-logo flexbox-left">
            <a class="navbar-item-inner flexbox" href="{{ url_for('index1') }}">
              <span class="logo"></span>
                <polygon points="925.79 318.48 830.56 0 183.51 1384.12 510.41 1178.46 925.79 318.48"/>
                <polygon points="1438.88 1663.28 1126.35 948.08 111.98 1586.26 0 1819.54 1020.91 1250.57 1123.78 1471.02 783.64 1663.28 1438.88 1663.28"/>
              </svg>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left" style="color: #fff;"  href="{{ url_for('dashboard_page') }}" >
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="search-outline"></ion-icon>
              </div>
              <div  class="link-text">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Dashboard Screw Force</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="home-outline"></ion-icon>
              </div>
              <div class="link-text">
                <span class="nav-icon">üè†</span> 
                <span  class="nav-text">M·ª•c B</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="folder-open-outline"></ion-icon>
              </div>
              <div class="link-text">
                <span class="nav-icon">‚ÑπÔ∏è</span> 
                <span  class="nav-text">M·ª•c B</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="pie-chart-outline"></ion-icon>
              </div>
              <div class="link-text">
                <span class="nav-icon">‚ÑπÔ∏è</span> 
                <span  class="nav-text">M·ª•c C</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="people-outline"></ion-icon>
              </div>
              <div class="link-text">
                <span class="nav-icon">‚ÑπÔ∏è</span> 
                <span  class="nav-text">M·ª•c D</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="chatbubbles-outline"></ion-icon>
              </div>
              <div class="link-text">
                <span class="nav-icon">‚ÑπÔ∏è</span> 
                <span  class="nav-text">M·ª•c B</span>
              </div>
            </a>
          </li>
          <li class="navbar-item flexbox-left">
            <a class="navbar-item-inner flexbox-left" href="{{ url_for('logout') }}">
              <div class="navbar-item-inner-icon-wrapper flexbox">
                <ion-icon name="settings-outline"></ion-icon>
              </div>
              <div style="color: #fff;" class="link-text">
                <span class="nav-icon">üîí</span> 
                <span  class="nav-text">Logout</span>
              </div>
            </a>
          </li>
        </ul>
      </nav>
      
      <div class="container">
        
        <div  class="overlay-image" alt="overlay"></div>
        <header>
          <h3>DASHBOARD</h3>
          <h1 style="padding: 10px; display: inline;">Infomation screw machine</h1>
        </header>
        <div class="mainContent">
          <h1 style="padding: 10px;"></h1>
          <div class="content">
            <div class="content-top">
              
              <div class="info1" >
                <div class="infor">Total</div>
                <div class="card" style="color: #fff; " id="total-records">N/A</div>
                <div class="glow-line"></div>
              </div>
              <div class="info1" >
                <div class="infor">Pass</div>
                <div class="card" style="color: rgb(2, 255, 158); " id="pass-records">N/A</div>
                <div class="glow-line"></div>
              </div>
              <div class="info1" >
                <div class="infor">Fail</div>
                <div class="card" style="color: rgb(247, 68, 68); " id="fail-records">N/A</div>
                <div class="glow-line"></div>
                </div>
              <div class="info1" >
                <div class="infor" >FPY</div>
                <div class="card" style="color: #fff;" id="fpy-percentage">N/A</div>
                <div class="glow-line"></div>
                </div>
              <div class="dowfile">
                <a id="download-excel"><span><img style="width: 32px; height: 32px; " src="{{ url_for('static', filename='images/download.png') }}"  alt="Expoprt File"></span></a>
              </div>
            </div>
            <div class="tbl-header">
              <table  cellpadding="0" cellspacing="0" border="0">
                <thead>
                  <tr>
                    <th>STT</th>
                    <th>FACTORY</th>
                    <th>LINE</th>
                    <th>NAME MACHINE</th>
                    <th>MODEL NAME</th>
                    <th>SERIAL NUMBER</th>
                    <th>FORCE 1</th>
                    <th>FORCE 2</th>
                    <th>FORCE 3</th>
                    <th>FORCE 4</th>
                    <th>TIME</th>
                    <th>STATE</th>
                  </tr>
                </thead>
              </table>
            </div>
            <div class="tbl-content">
              <table id="result-table" cellpadding="0" cellspacing="0" border="0">
                <tbody id="table-body">
                </tbody>
              </table>
            </div>
            <!-- filter -->
            <div class="filter">
            Line: <select id="line-combobox">
            </select>
            Factory: <select id="factory-combobox">
            </select>
            Name machine: <select id="nameMachine-combobox" style="width: 80px;"></select>
              Time: <input style="width: 180px;"  type="datetime-local" name="time_update" id="time_update">
              To: <input style="width: 180px;"  type="datetime-local" name="time_end" id="time_end">
              State: <select id="state-combobox">
            </select>
              <input style=" transition: all .5s ease-in-out; padding: 0.5em; width: 5em; " type="submit" value="Search" id="filter">
            </div>
            <div id="count"></div>
          </div>
          <div class="modeFullScreen">
            <a href="#" id="toggle_fullscreen">
              <img
                id="fullscreenic"
                src="/static/images/fullscreen1.png"
                alt="Fullscreen Icon"
              />
            </a>
          </div> 
        
        <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
        <div class="chartAll">
          <div class="chartContent">    
            <div class="pagination"  id="pagination">
            </div>        
            <div class="pieChartInfo">
              <figure class="highcharts-figure">
                <div id="container-pie"></div>
              </figure>
              <button id="backButton"><img src="{{ url_for('static', filename='images/backButton.png') }}" alt=""></button>
              <script>
                function createInitialChart() {
                  Highcharts.chart('container-pie', {
                    chart: {
                      type: 'pie',
                      backgroundColor: null
                    },
                    title: {
                      text: 'Rate Pass/Fail',
                      align: 'left',
                      verticalAlign: 'top',
                      y:15,
                      style: {
                        color: '#fff',
                        fontSize: '16px',
                        fontWeight: 'bold'
                      }
                    },
                    tooltip: {
                      pointFormat: '{series.name}: <b>{point.percentage:.2f}%</b>'
                    },
                    accessibility: {
                      point: {
                        valueSuffix: '%'
                      },
                      enabled: false
                    },
                    plotOptions: {
                      pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                          enabled: true,
                          format: '{point.name}: {point.percentage:.2f}%',
                          style: {
                            fontWeight: 'bold',
                            color: 'white',
                            
                          },
                          filter: {
                    operator: '>',
                    property: 'percentage',
                    value: 10
                }
                        },
                        point: {
                          events: {
                            click: function () {
                              createChildChart(this.name); 
                            }
                          }
                        }
                      }
                    },
                    series: [{
                      name: 'Rate',
                      colorByPoint: true,
                      data: [
                        { name: 'Pass', y: 65.32, color: '#3464eb', sliced: true,
                        selected: true, },
                        { name: 'Fail', y: 34.68, color: '#eb3434' }
                      ],
                      style:{
                        fontSize: '16px'
                      }
                    }],
                    credits: {
                      enabled: false
                    }
                  });
                  document.getElementById('backButton').style.display = 'none';
                }
                function createChildChart(category) {
                  Highcharts.chart('container-pie', {
                    chart: {
                      type: 'column',
                      backgroundColor: null,
                      zoomType: 'x'
                    },
                    title: {
                      text: `Details for ${category}`,
                      style: {
                        color: '#fff',
                        fontSize: '16px',
                        fontWeight: 'bold'
                      },
                      align: 'left'
                    },
                    xAxis: {
                      categories: [
                        '00:00-01:00', '01:00-02:00', '02:00-03:00', '03:00-04:00',
                        '04:00-05:00', '05:00-06:00', '06:00-07:00', '07:00-08:00',
                        '08:00-09:00', '09:00-10:00', '10:00-11:00', '11:00-12:00',
                        '12:00-13:00', '13:00-14:00', '14:00-15:00', '15:00-16:00',
                        '16:00-17:00', '17:00-18:00', '18:00-19:00', '19:00-20:00',
                        '20:00-21:00', '21:00-22:00', '22:00-23:00', '23:00-00:00'
                      ],
                      labels: {
                        style: {
                          color: '#fff'
                        }
                      }
                    },
                    yAxis: {
                      labels: {
                        style: {
                          color: '#fff'
                        }
                      },
                      title: {
                        text: 'Count',
                        style: {
                          color: '#fff'
                        }
                      }
                    },
                    legend: {
                      itemStyle: {
                        color: '#ffffff'
                      }
                    },
                    series: [{
                      name: category,
                      data: category === 'Pass' ? 
                        [5, 10, 15, 20, 22, 26, 29, 31, 33, 36, 32, 18, 25, 32, 26, 16, 18, 15, 15, 23, 21, 33, 26, 25] : 
                        [3, 8, 12, 33, 36, 32, 18, 25, 18, 22, 12, 22, 3, 8, 12, 13, 22, 32, 28, 25, 18, 32, 22, 22],
                      color: category === 'Pass' ? '#3464eb' : '#eb3434'
                    }],
                    credits: {
                      enabled: false
                    }
                  });
            
                  document.getElementById('backButton').style.display = 'inline-block';
                }
          
                document.getElementById('backButton').addEventListener('click', function () {
                  createInitialChart();
                });
            
                createInitialChart();
              </script>
            </div>
            
            <div class="chartRight">
              <div>
                <figure class="highcharts-figure">
                  <div id="container-line"></div>
              </figure>
              <script>
                Highcharts.chart('container-line', {
                  chart: {
                      zoomType: 'x',
                      backgroundColor: {
                          linearGradient: [0, 0, 500, 500],
                          stops: [
                              [0, 'rgba(32, 32, 32, 0.8)'],
                              [1, 'rgba(40, 40, 40, 0.8)']
                          ]
                      },
                      plotBorderWidth: 0,
                      backgroundColor: null
                  },
                  accessibility:{
                    enabled: false
                  },
                  credits: {
                enabled: false 
                },
                title: {
                    text: 'Title',
                    align: 'left',
                    style:{
                      color: '#fff', 
                      fontSize: '16px', 
                      fontWeight: 'bold'
                    }
                },

                subtitle: {
                    text: 'abc',
                    align: 'left', 
                    fontSize: '14px',
                    style:{
                      color : '#fff'
                    }
                },
                yAxis: {
                    title: {
                        text: 'OEE'
                    }
                },
                labels: {
                    style: {
                        color: '#ffffff' 
                    }
                  },

                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom',
                    itemStyle: {
                    color: '#ffffff'
                },
                itemHoverStyle: {
                    color: '#cccccc'
                }
                },
                yAxis: {
                  title: {
                      text: 'OEE',
                      style: {
                          color: '#ffffff'
                      }
                  },
                  labels: {
                      style: {
                          color: '#ffffff'
                      }
                  }
              },
              xAxis: {
              categories: ['BV1', 'BV2', 'BV3', 'BV4', 'BV5', 'BV6', 'BV7', 'BV8', 'BV9', 'BV10', 'BV11', 'BV12', 'BV13'],
              labels: {
                  style: {
                      color: '#ffffff'
                  }
              }
          },
                series: [{
                    name: 'FORCE 1',
                    data: [
                        12, 13, 12, 15, 13, 11,
                        14, 13.5, 13.6, 13.4, 12.6, 14.7, 13.4
                    ]
                }, {
                    name: 'FORCE 2',
                    data: [
                        11, 12, 11, 14, 13, 12.3,
                        12, 15, 13, 13.4, 14.5, 13.6, 11.8
                    ]
                }
                , {
                    name: 'FORCE 3',
                    data: [
                        11.5, 12.3, 11.6, 14.1, 13.4, 12.3,
                        12.6, 11, 11.6, 12.4, 13.5, 13.6, 11.8
                    ]
                }, {
                    name: 'FORCE 4',
                    data: [
                        12.5, 13.6, 14.6, 12.2, 13.7, 12.3,
                        12.5, 15.6, 13.1, 13.6, 14.3, 13.9, 11.8
                    ]
                }],

                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 500
                        },
                        chartOptions: {
                            legend: {
                                layout: 'horizontal',
                                align: 'center',
                                verticalAlign: 'bottom'
                            }
                        }
                    }]
                }
                });
              </script>
              </div>
            </div>
          </div>
          <div class="chartCotent1">
            <div class="chartColumn">
                <figure class="highcharts-figure">
                  <div id="container3"></div>
                </figure>
                <script>
                  Highcharts.chart('container3', {
                    chart: {
                      zooming: {
                        type: 'x'
                      },
                      backgroundColor: null,
                      plotBackgroundColor:null
                    },
                    title: {
                      text: 'Screw Force Trend',
                      align: 'left',
                       style: {
                          color: '#fff', 
                          fontSize: '16px', 
                          fontWeight: 'bold'
                        }
                    },
                    credits: {
                      enabled: null
                    },
                  accessibility:{
                    enabled: false
                  },
                    xAxis: [{
                      categories: [
                        '10/1/2025', '11/1/2025', '12/1/2025', '13/1/2025', '14/1/2025', '15/1/2025',
                        '16/1/2025', '17/1/2025', '18/1/2025', '19/1/2025', '20/1/2025', '21/1/2025'
                      ],
                      crosshair: true,
                      labels: {
                        style: {
                          color: '#fff', 
                          fontSize: '12px'
                        }
                      }
                      
                    }],
                    yAxis: [{ 
                      labels: {
                        format: '{value}¬∞%',
                        style: {
                          color: '#fff'
                        }
                      },
                      title: {
                        text: 'FPY',
                        style: {
                          color: '#fff'
                        }
                      }
                    }, { 
                      title: {
                        text: 'Count',
                        style: {
                          color: '#fff'
                        }
                      },
                      labels: {
                        format: '{value}',
                        style: {
                          color: '#fff'
                        }
                      },
                      opposite: true
                    }],
                    tooltip: {
                      shared: true
                    },
                    legend: {
                      align: 'center',
                      verticalAlign: 'bottom',
                      itemStyle:{
                        color: '#fff'
                      },
                      itemHoverStyle: {
                      color: '#cccccc'
                    }
                    },
                    series: [{
                      name: 'Pass',
                      type: 'column',
                      yAxis: 1,
                      data: [
                        45.7, 37.0, 28.9, 17.1, 39.2, 18.9, 90.2, 78.5, 74.6,
                        18.7, 17.1, 16.0
                      ],
                      tooltip: {
                        valueSuffix: ''
                      }
                    }, {
                      name: 'Fail',
                      type: 'column',  
                      yAxis: 1,
                      data: [
                        54.3, 63.0, 71.1, 82.9, 60.8, 81.1, 9.8, 21.5, 25.4,
                        81.3, 82.9, 84.0
                      ],
                      tooltip: {
                        valueSuffix: ''
                      }
                    }, {
                      name: 'FPY',
                      type: 'spline', 
                      data: [
                        45.7, 37.0, 28.9, 17.1, 39.2, 18.9, 90.2, 78.5, 74.6,
                        18.7, 17.1, 16.0
                      ],
                      tooltip: {
                        valueSuffix: ' %'
                      }
                    }]
                  });
                </script>
              
            </div>
            <div class="chartColumn2">
              <figure class="highcharts-figure">
                <div id="container"></div>
              </figure>
              <script>
                Highcharts.chart('container', {
                  chart: {
                    type: 'line',
                    backgroundColor:null
                  },
                  
                  title: {
                    text: 'Chart CPK',
                    align:'left',
                    style:{
                      color: '#fff', 
                      fontSize: '16px', 
                      fontWeight: 'bold'
                    }
                  },
                  xAxis: {
                    categories: ['Machine 1', 'Machine 2', 'Machine 3', 'Machine 4', 'Machine 5', 'Machine 6', 'Machine 7', 'Machine 8', 'Machine 9'],
                    labels: {
                      style: {
                        color: '#ffffff' 
                      }
                    },
                    title: {
                      text: 'Machine Name', 
                      style: {
                        color: '#fff'
                      }
                    }
                  },
                  credits:{
                    enabled:null
                  },
                  legend: {
                      align: 'center',
                      verticalAlign: 'bottom',
                      itemStyle:{
                        color: '#fff'
                      },
                      itemHoverStyle: {
                      color: '#cccccc'
                    }
                  },
                  
                  accessibility:{
                    enabled: false
                  },
                  yAxis: {
                    title: {
                      text: 'Force Screw',
                      style:{
                        color:'#fff'
                      }
                    },
                    labels: {
                    style: {
                        color: '#ffffff' 
                    }
                  },
                  },
                  series: [
                    {
                      type: 'line',
                      name: 'AVG force 1',
                      data: [7.7, 8, 10, 8.5, 9, 9.5, 8.2, 7.7, 10.6],
                      zIndex: 1
                    },
                    {
                      type: 'line',
                      name: 'AVG force 2',
                      data: [9.5, 8.5, 9.1, 7.3, 8.2, 9.8, 8.7, 6.9, 7.1],
                      zIndex: 1
                    },
                    {
                      type: 'line',
                      name: 'AVG force 3',
                      data: [11.8, 7.1, 9.2, 9.6, 7.1, 8.3, 8.4, 7.6, 9.3],
                      zIndex: 1
                    },
                    {
                      type: 'line',
                      name: 'AVG force 4',
                      data: [7.6, 8.3, 7.5, 6.4,7.9, 8.4, 8.1, 11.5, 10.2],
                      zIndex: 1
                    },
                    {
                      type: 'line',
                      name: 'UCL',
                      data: Array(9).fill(11), 
                      dashStyle: 'Solid',
                      color: 'red',
                      zIndex: 2
                    },
                    {
                      type: 'line',
                      name: 'LCL',
                      data: Array(9).fill(7), 
                      dashStyle: 'Solid',
                      color: 'blue',
                      zIndex: 2
                    },
                    {
                      type: 'line',
                      name: 'AVG',
                      data: Array(9).fill(9), 
                      dashStyle: 'Dot',
                      color: 'green',
                      zIndex: 3
                    }
                  ]
                });
              </script>
            </div>
          </div>
          <div class="chartContent2">
            <!-- <div class="chart3">
              <h1>ABC</h1>
            </div>
            <div class="chart4">
              <h1>DEF</h1>
            </div> -->
          </div>
        </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
